import math.sqrt test.assert_eq

get_primes = |n|
  if n <= 1
    return []

  sieve = [true for _ in 0..=n]

  for x in 2..=(sqrt n) if sieve[x]
    i = x * x
    while i <= n
      sieve[i] = false
      i += x

  [x for x in 2..=n if sieve[x]]

primes = get_primes 30
assert_eq primes [2 3 5 7 11 13 17 19 23 29]

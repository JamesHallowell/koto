import test.assert_eq

export tests =
  test_one_two: ||
    one_two = ||
      yield 1
      yield 2
    assert_eq [x for x in one_two()] [1 2]

  test_yield_in_loop: ||
    doubler = |xs|
      for x in xs
        yield x + x
    z = [n for n in doubler(10..=15)]
    assert_eq z [20 22 24 26 28 30]

  test_yield_multiple: ||
    enumerate = |xs|
      for i, x in 0..xs.size(), xs
        yield i, x

    z = [[i x] for i, x in enumerate 1..=3]
    assert_eq z [[0 1] [1 2] [2 3]]
